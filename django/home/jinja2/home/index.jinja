{% extends "base.jinja" %}

{% block introduction_section %}
    <section class='landing-page-introduction'>
        <div class='container'>
            <div class='row'>
                <div class='col'>
                    <h1 class='text-white'>A growing collection of resources for computational model-based science.</h1>
                </div>
            </div>
            <div class='row'>
                <div class='col'>
                    <h3 class='text-white'>CoMSES Net is an international network of researchers,
                     educators and professionals with the common goal of improving the way we develop, share, and use computational
                      modeling in the social and ecological sciences.</h3>
                      <a href='{{ slugurl("about") }}'>Learn more</a>
                </div>
            </div>
        </div>
    </section>
    <!--
    {% with site_settings=settings("core.SiteSettings", use_default_site=True) %}
        {% if site_settings.has_banner %}
            <section class='banner'>
                <div class='alert alert-warning' role='alert'>
                    <h1 class='alert-heading text-center'>
                        <a href='{{ site_settings.banner_destination_url }}'>
                            <i class='fas fa-bullhorn'>
                            </i>
                            {{ site_settings.banner_message_title }}
                            <i class='fas fa-bullhorn'></i>
                        </a>
                    </h1>

                    <div class='mx-5'>
                        <em>Posted {{ site_settings.last_modified.strftime('%B %-d, %Y') }}</em>
                        <div class='text-start fw-bold my-2'>
                            {% autoescape off %}
                                {{ site_settings.banner_message }}
                            {% endautoescape %}
                        </div>
                    </div>
                </div>
            </section>
        {% endif %}
    {% endwith %}
    -->
{% endblock %}
{% block page %}
<div class='container'>
    {# FIXME: this should be extracted and moved into the DB as well like CategoryIndexPage callouts #}
    <section class='callouts'>
        <div class='row'>
            <div class='col text-center'>
                <a href='{{ url("library:codebase-add") }}'>
                    <img src='{{ static("images/icons/submit.png") }}' alt='Publish your code'>
                    <br>
                    <h2>Model Library</h2>
                </a>
                <div class='caption'>
                    A digital repository for model software supporting FAIR principles                </div>
            </div>
            <div class='col text-center'>
                <a href='{{ slugurl("resources") }}'>
                    <img src='{{ static("images/icons/search.png") }}' alt='Resources for Computational Modelers'>
                    <br>
                    <h2>Community</h2>
                </a>
                <div class='caption'>
                    <ul class="mb-0">
                        Share jobs, events, and discussions with an international network of modeling scientists
                    </ul>
                </div>
            </div>
            <div class='col text-center'>
                <a href='{{ url("core:event-list") }}'>
                    <img src='{{ static("images/icons/groups.png") }}' alt='Community Events and Jobs'>
                    <br>
                    <h2>Resources</h2>
                </a>
                <div class='caption'>
                    Explore curated educational content, standards, etc
                </div>
            </div>
        </div>
    </section>
</div>
<section class="latest-peer-reviewed-models">
    <div class="container">
        <div class="row">
            <!-- left half -->
            <div class="col-md-6 d-flex flex-column justify-content-center text-center left-section">
                <button class="btn btn-outline-light my-2" href='{{ url("library:codebase-list") }}'>Browse the model library</button>
                <button class="btn btn-outline-light my-2">Publish your model code</button>
            </div>

            <!-- right half -->
            <div class="col-md-6 right-section">
                <h1>Latest Peer Reviewed Models</h1>
                <div class="row">
                    {% for item in featured_content[:3] %}
                        <div class="col-12 mb-3">
                            <div class="d-flex align-items-center">
                                <div class=" text-center">
                                    <a href="{{ item.link }}">
                                        {{ image(item.featured_image, "fill-350x350", class='img-fluid latest-peer-reviewed-image') }}
                                    </a>
                                </div>
                                <div class="ps-3">
                                    <h3><a href="{{ item.link }}">{{ item.title }}</a></h3>
                                    <p class="latest-peer-reviewed-description">{{ item.summary }}</p>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        {# FIXME: integrate this with feed blocks below #}
        <div class='row'>
            <div class='col' data-title="Recent Forum Posts" data-link="{{ constants.DISCOURSE_BASE_URL }}" data-feed="ForumPosts" id="forum-feed"></div>
            <div class='col' data-title="Latest Community Events" data-link="/events/" data-feed="Events" id="events-feed"></div>
            <div class='col' data-title="Latest Jobs & Appointments" data-link="/jobs/" data-feed="Jobs" id="jobs-feed"></div>
        </div>
</section>

<section class='community'>
    <h1 class="text-center">Our Community</h1>
    <div class='container-fluid'>
        <div class='row justify-content-center mt-4'>
            <!-- jobs and appointments -->
            <div class='col-md-5 community-box'>
                <h3 class="text-center">Jobs and Appointments</h3>
                {% for item in latest_jobs[:3] %}
                    <div class='activity'>
                        <h4><a href='{{ item.get_absolute_url() }}'>{{ item.title }}</a></h4>
                        <p><small class='text-muted'>{{ item.summary }}</small></p>
                    </div>
                {% endfor %}
                <div class="text-center mt-3">
                    <button class="btn btn-outline-dark community-btn">Browse more jobs</button>
                </div>
            </div>

            <div class='col-md-5 community-box'>
                <h3 class="text-center">Upcoming Events</h3>
                {% for event in upcoming_events[:3] %}
                    <div class='activity'>
                        <h4><a href='{{ event.url }}'>{{ event.title }}</a></h4>
                        <p><small class='text-muted'>Begins {{ event.start_date.strftime('%a %b %d, %Y') }}</small></p>
                    </div>
                {% endfor %}
                <div class="text-center mt-3">
                    <button class="btn btn-outline-dark community-btn">Browse more events</button>
                </div>
            </div>
            <div class='col-md-5 community-box'>
                <h3 class="text-center">Recent Forum Posts</h3>
                {% for post in recent_forum_activity[:3] %}
                    <div class='activity'>
                        <h4><a href='{{ post.url }}'>{{ post.title }}</a></h4>
                        <small class='text-muted'>Posted by 
                            {% if post.submitter_url %}
                            <a href='{{ post.submitter_url }}'>{{ post.submitter_name }}</a>
                            {% else %}
                            {{ post.submitter_name }}
                            {% endif %}
                        </small>
                    </div>
                {% endfor %}
                <div class="text-center mt-3">
                    <button class="btn btn-outline-dark community-btn">CoMSES Net Forums</button>
                </div>
            </div>
        </div>
    </div>
</section>
<section class="extra-resources">
    <div class="container">
        <h1>Extra resources</h1>
        <div class="row">
            <!-- buttons section -->
            <div class="col-md-6 d-flex flex-column justify-content-center left-section">
                <div class="row">
                    <div class="col-md-6 text-center">
                        <button class="btn btn-primary my-2 w-100">Education</button>
                        <button class="btn btn-primary my-2 w-100">Frameworks</button>
                    </div>
                    <div class="col-md-6 text-center">
                        <button class="btn btn-primary my-2 w-100">Standards</button>
                        <button class="btn btn-primary my-2 w-100">Journals</button>
                    </div>
                </div>
                <div class="text-center mt-3">
                    <button class="btn btn-primary my-2 w-75">More resources</button>
                </div>
            </div>

            <!-- yt content -->
            <div class="col-md-6 right-section">
                <h1 class="text-center">Latest Video Content</h1>
                <div class="row">
                    <!-- thumbnails placeholder -->
                    <div class="col-md-6 mb-3 text-center">
                        <div class="video-thumbnail"></div>
                        <p><a href="#">video title</a></p>
                    </div>
                    <div class="col-md-6 mb-3 text-center">
                        <div class="video-thumbnail"></div>
                        <p><a href="#">video title</a></p>
                    </div>
                    <div class="col-md-6 mb-3 text-center">
                        <div class="video-thumbnail"></div>
                        <p><a href="#">video title</a></p>
                    </div>
                    <div class="col-md-6 mb-3 text-center">
                        <div class="video-thumbnail"></div>
                        <p><a href="#">video title</a></p>
                    </div>
                </div>
                <div class="text-center mt-3">
                    <button class="btn btn-outline-light my-2 w-75">CoMSES Youtube Channel</button>
                </div>
            </div>
        </div>
    </div>
</section>

{% endblock %}

{% block js %}
{{ vite_asset('apps/homepage_feeds.ts') }}
{% endblock %}
